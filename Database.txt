CREATE DATABASE Vectra

USE Vectra

CREATE TABLE Users (
	UserId INTEGER PRIMARY KEY IDENTITY(1,1) NOT NULL,
	Username NVARCHAR(64) NOT NULL,
	Email NVARCHAR(64) NOT NULL,
	HashedPassword NVARCHAR(128) NOT NULL,
	isActive BIT NOT NULL,
	CreatedAt DATETIME2 DEFAULT CURRENT_TIMESTAMP NOT NULL,
	ModifiedAt DATETIME2 DEFAULT CURRENT_TIMESTAMP NOT NULL
);

CREATE TABLE History (
	HistoryId INTEGER PRIMARY KEY IDENTITY(1,1) NOT NULL,
	PhotoURL NVARCHAR(255) NOT NULL,
	CreatedAt DATETIME2 DEFAULT CURRENT_TIMESTAMP NOT NULL,
	ModifiedAt DATETIME2 DEFAULT CURRENT_TIMESTAMP NOT NULL
);

CREATE TABLE UserHistory (
	[UserId] INT FOREIGN KEY REFERENCES Users(UserId) NOT NULL,
	[HistoryId] INT FOREIGN KEY REFERENCES History(HistoryId) NOT NULL,
	PRIMARY KEY(UserId, HistoryId)
);